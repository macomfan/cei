<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sdk xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	 xsi:schemaLocation="https://github.com/macomfan/cei https://github.com/macomfan/cei/ceisdk.xsd"
	 xmlns="https://github.com/macomfan/cei"
	 name="binance">

	<definition document="https://binance-docs.github.io/apidocs/spot/cn/"/>

	<model name="Timestamp">
		<int name="serverTime"/>
	</model>

    <model name="ExchangeInfo">
        <string name="timezone"/>
		<int name="serverTime"/>
		<object_array name="rateLimits" model="RateLimits"/>
        <object_array name="symbols" model="Symbol"/>
    </model>
	
	<model name="RateLimits">
		<string name="rateLimitType"/>
		<string name="interval"/>
		<int name="intervalNum"/>
		<int name="limit"/>
	</model>
	
	<model name="Symbol">
		<string name="symbol"/>
		<string name="status"/>
		<string name="baseAsset"/>
		<int name="baseAssetPrecision"/>
		<string name="quoteAsset"/>
		<int name="quotePrecision"/>
		<string_array name="orderTypes"/>
		<boolean name="icebergAllowed"/>
		<boolean name="ocoAllowed"/>
	</model>

	<model name="Depth">
		<int name="lastUpdateId"/>
		<object_array name="bids" model="DepthEntity"/>
		<object_array name="asks" model="DepthEntity"/>
	</model>

	<model name="DepthEntity">
		<decimal name="price"/>
		<decimal name="qty"/>
	</model>

	<model name="TradeList">
		<object_array name="data" model="Trade"/>
	</model>

	<model name="Trade">
		<int name="id"/>
		<decimal name="price"/>
		<decimal name="qty"/>
		<decimal name="quoteQty"/>
		<int name="time"/>
		<boolean name="isBuyerMaker"/>
		<boolean name="isBestMatch"/>
	</model>

    <restful name="MarketClient">
		<definition url="https://api.binance.com"/>
		<interface name="getTimestamp">
			<request method="get" target="/api/v3/time"/>
			<response model="Timestamp">
				<json_parser>
					<json_value copy="serverTime"/>
				</json_parser>
			</response>
		</interface>
        <interface name="getExchangeInfo">
            <request method="get" target="/api/v3/exchangeInfo"/>
            <response model="ExchangeInfo">
                <json_parser>
                    <json_value copy="timezone"/>
					<json_value copy="serverTime"/>
					<json_object_array copy="rateLimits" model="RateLimits">
						<json_value copy="rateLimitType"/>
						<json_value copy="interval"/>
						<json_value copy="intervalNum"/>
						<json_value copy="limit"/>
					</json_object_array>
					<json_object_array copy="symbols" model="Symbol">
						<json_value copy="symbol"/>
						<json_value copy="status"/>
						<json_value copy="baseAsset"/>
						<json_value copy="baseAssetPrecision"/>
						<json_value copy="quoteAsset"/>
						<json_value copy="quotePrecision"/>
						<json_value copy="orderTypes"/>
						<json_value copy="icebergAllowed"/>
						<json_value copy="ocoAllowed"/>
					</json_object_array>
                </json_parser>
            </response>
        </interface>

		<interface name="getDepth">
			<inputs>
				<string name="symbol"/>
				<int name="limit"/>
			</inputs>
			<request method="get" target="/api/v3/depth">
				<query_strings>
					<query key="symbol" value="{symbol}"/>
					<query key="limit" value="{limit}"/>
				</query_strings>
			</request>
			<response model="Depth">
				<json_parser>
					<json_value copy="lastUpdateId"/>
					<json_object_array copy="bids" model="DepthEntity">
						<json_value key="\[0]" value="{price}"/>
						<json_value key="\[1]" value="{qty}"/>
					</json_object_array>
					<json_object_array copy="asks" model="DepthEntity">
						<json_value key="\[0]" value="{price}"/>
						<json_value key="\[1]" value="{qty}"/>
					</json_object_array>
				</json_parser>
			</response>
		</interface>

		<interface name="getTrade">
			<inputs>
				<string name="symbol"/>
				<int name="limit"/>
			</inputs>
			<request method="get" target="/api/v3/trades">
				<query_strings>
					<query key="symbol" value="{symbol}"/>
					<query key="limit" value="{limit}"/>
				</query_strings>
			</request>
			<response model="TradeList">
				<json_parser>
					<json_object_array value="{data}" model="Trade">
						<json_value copy="id"/>
						<json_value copy="price"/>
						<json_value copy="qty"/>
						<json_value copy="quoteQty"/>
						<json_value copy="time"/>
						<json_value copy="isBuyerMaker"/>
						<json_value copy="isBestMatch"/>
					</json_object_array>
				</json_parser>
			</response>
		</interface>
    </restful>

	<model name="Symbol">
		<string name="symbol"/>
		<string name="status"/>
		<string name="baseAsset"/>
		<int name="baseAssetPrecision"/>
		<string name="quoteAsset"/>
		<int name="quotePrecision"/>
		<string_array name="orderTypes"/>
		<boolean name="icebergAllowed"/>
		<boolean name="ocoAllowed"/>
	</model>
</sdk> 